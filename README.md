# Script Tools Chrome 扩展项目文档

## 项目概述

Script Tools 是一个 Chrome 浏览器扩展，主要用于自动化执行 HTTP 请求。用户可以通过简单的界面配置请求参数、执行次数和间隔时间，实现批量 API 调用功能。

## 项目结构

```
c:\project\script-tools/
├── manifest.json          # 扩展配置
文件
├── popup.html             # 弹出窗口
界面
├── popup.css              # 弹出窗口
样式
├── popup.js               # 弹出窗口
逻辑
├── background.js          # 后台服务
脚本
└── script.png             # 扩展图标
```

## 文件详细说明

### 1. manifest.json

- **版本**: Manifest V3
- 权限
  - storage: 存储数据
  - activeTab: 访问当前标签页
  - scripting: 脚本注入
  - tabs: 标签页管理
- **功能**: 定义扩展基本信息、权限和背景脚本

### 2. popup.html

- **布局**: 侧边栏导航 + 内容区域
- 功能模块
  - 脚本执行（当前可用）
  - 工具2（开发中）
  - 工具3（开发中）
- **主要元素**: 文本输入框、执行次数设置、间隔时间设置

### 3. popup.js

- 核心功能
  - 导航切换
  - 参数提取和验证
  - 与背景脚本通信
- 关键函数
  - getRequestParam(): 从输入文本中提取 URL 和请求内容

### 4. background.js

- **作用**: 处理消息通信和脚本注入
- 主要功能
  - 监听来自弹出窗口的消息
  - 注入脚本到目标页面
  - 执行循环请求逻辑

### 5. popup.css

- **样式特点**: 响应式布局，支持最小宽度 600px
- **设计风格**: 简洁现代的界面设计

## 使用说明

### 安装方法

1. 打开 Chrome 浏览器
2. 进入 chrome://extensions/
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹 c:\project\script-tools

### 使用方法

1. **打开扩展**: 点击浏览器工具栏中的扩展图标

2. 输入请求

   : 在文本框中输入 fetch 请求代码，例如：

   ```javascript
   fetch('https://api.example.com/
   data', {
       method: 'POST',
       headers: {'Content-Type': 
       'application/json'},
       body: JSON.stringify({key: 
       'value'})
   });
   ```

3. 设置参数

   - 执行次数: 请求重复执行的次数
   - 执行间隔: 每次请求之间的时间间隔（毫秒）

4. **执行请求**: 点击"确认"按钮开始执行

### 功能特点

- **批量执行**: 支持多次重复执行同一请求
- **时间控制**: 可配置请求间隔时间
- **错误处理**: 包含完整的错误捕获和日志输出
- **安全合规**: 符合 Chrome 扩展 Manifest V3 安全要求

## 技术实现

### 通信机制

1. 弹出窗口 (popup.js) 收集用户输入
2. 通过 chrome.runtime.sendMessage 发送到背景脚本
3. 背景脚本 (background.js) 使用 chrome.scripting.executeScript 注入脚本
4. 注入的脚本在目标页面执行实际请求

### 参数处理流程

1. 用户输入 → 2. 参数解析 → 3. 消息发送 → 4. 脚本注入 → 5. 循环执行

## 注意事项

1. **权限要求**: 扩展需要访问所有网站的权限以执行跨域请求
2. **输入格式**: 必须使用标准的 fetch API 语法
3. **性能考虑**: 大量请求可能影响页面性能，请合理设置执行次数和间隔
4. **安全警告**: 请确保只在可信网站上使用此扩展

## 开发状态

- ✅ 脚本执行功能（已完成）
- 🔄 工具2（开发中）
- 🔄 工具3（开发中）

这个扩展为开发者和测试人员提供了便捷的 API 批量测试工具，特别适合简化重复性操作。
